{{- /* layouts/shortcodes/notes_index.html (CSS-only tabs) */ -}}

{{- $root := .Site.GetPage "section" "notes" -}}
{{- if not $root -}}
  {{- errorf "notes_index: cannot find section 'notes'" -}}
{{- end -}}

{{- $uid := printf "notesidx-%d" now.UnixNano -}}

<div class="notes-index-switch notes-tabs" data-notes-index>

  <!-- Tabs (CSS only) -->
  <input class="notes-tabs-input" type="radio" name="{{ $uid }}" id="{{ $uid }}-topic" checked>
  <label class="notes-tabs-btn" for="{{ $uid }}-topic">By topic</label>

  <input class="notes-tabs-input" type="radio" name="{{ $uid }}" id="{{ $uid }}-date">
  <label class="notes-tabs-btn" for="{{ $uid }}-date">By date</label>

  <!-- View: topic -->
  <div class="notes-tabs-view notes-tabs-view-topic">

  <h3 class="notes-index-heading">Topics</h3>
  <ul class="notes-index notes-index-sections">
    {{- range $root.Sections.ByTitle -}}
      <li class="notes-index-item notes-index-section">
        <a class="notes-index-link" href="{{ .RelPermalink }}">{{ .Title }}</a>

        {{- with .Params.description -}}
          <details class="notes-index-details">
            <summary class="notes-index-summary">Overview</summary>
            <div class="notes-index-details-body">{{ . | markdownify }}</div>
          </details>
        {{- end -}}
      </li>
    {{- end -}}
  </ul>

  <h3 class="notes-index-heading">Notes</h3>
  <ul class="notes-index notes-index-pages">
    {{- range $root.RegularPages.ByDate.Reverse -}}
      <li class="notes-index-item notes-index-page">
        <a class="notes-index-link" href="{{ .RelPermalink }}">{{ .Title }}</a>
        {{- with .Date -}} <span class="notes-index-date">— {{ .Format "2006-01-02" }}</span>{{- end -}}

        {{- $summary := "" -}}
        {{- with .Params.description -}}{{- $summary = . -}}
        {{- else -}}{{- with .Summary -}}{{- $summary = . -}}{{- end -}}{{- end -}}

        {{- if $summary -}}
          <details class="notes-index-details">
            <summary class="notes-index-summary">Abstract</summary>
            <div class="notes-index-details-body">{{ $summary | markdownify }}</div>
          </details>
        {{- end -}}
      </li>
    {{- end -}}
  </ul>

</div>


  <!-- View: date -->
  <div class="notes-tabs-view notes-tabs-view-date">
    <ul class="notes-index notes-index-pages">
      {{- range $root.RegularPages.ByDate.Reverse -}}
        <li class="notes-index-item notes-index-page">
          <a class="notes-index-link" href="{{ .RelPermalink }}">{{ .Title }}</a>
          {{- with .Date -}} <span class="notes-index-date">— {{ .Format "2006-01-02" }}</span>{{- end -}}
        </li>
      {{- end -}}
    </ul>
  </div>

</div>
